<html>

<style>
    html {
        text-align: center;
        font-size: 16px;
    }

    div {
        padding: 1rem;
    }

    #input {
        font-size: 16px;
    }

    p {
        font-size: 16px;
    }
</style>
<script>

    function Logger() {
        this.send = async function (server, data) {
            if (!server) return this
            try {
                await fetch('http://' + server + '/send', {
                    method: 'POST', // *GET, POST, PUT, DELETE, etc.
                    headers: {},
                    body: JSON.stringify({
                        data: data
                    })
                })
            } catch (e) {
                console.log('e', e)
            }
            return this
        }
        this.init = function ({ server }) {
            const send = this.send
            var prev_args
            console.stdlog = console.log.bind(console);
            console.log = function (...args) {
                send(server, JSON.stringify(...args))
                console.stdlog.apply(console, arguments);
            }
        }
    }

    const logger = new Logger();
    logger.init({ server: window.location.hostname + ':7777' })
    console.log("testing...")


    // async function post() {
    //     try {
    //         await fetch('http://' + window.location.hostname + ':7777/send', {
    //             method: 'POST', // *GET, POST, PUT, DELETE, etc.
    //             headers: {},
    //             body: JSON.stringify({
    //                 log: JSON.stringify(["hello log"])
    //             })
    //         })
    //         console.log("post success")
    //     } catch (e) {
    //         console.log('post failed')
    //     }
    // }


    // async function read() {
    //     try {
    //         const req = await fetch('http://' + window.location.hostname + ':7777/read/' + numLogsToRead, {
    //             method: 'GET', // *GET, POST, PUT, DELETE, etc.
    //             headers: {},
    //         })
    //         const res = await req.json()
    //         console.log('res', res)
    //         console.log("read success")
    //     } catch (e) {
    //         console.log('read failed')
    //     }
    // }

    function testing123() {
        console.log("testing123...")
    }
    function testingTag() {
        console.log({ tag: "123", log: "testing tag..." })

    }
</script>


<body>

    <div style="text-align: center; font-size:30px">
    </div>

    <div style="display:flex; justify-content:center">
        <div
            style="border:1px solid #333; border-radius:10px; width:300px; display:flex; flex-direction: column; gap:10px;">
            <h5>API TEST</h5>
            <button onClick="testing123()">console.log("testing123...")</button>
            <button onClick="testingTag()">console.log({ tag: "123", log: "testing tag..." })</button>
        </div>
    </div>

</body>

</html>